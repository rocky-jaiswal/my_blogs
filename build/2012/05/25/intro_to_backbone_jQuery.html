<!DOCTYPE html>
<html>
  <head>
  <title>Rocky Jaiswal A gentle introduction to Backbone with jQuery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <link href="/stylesheets/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/bootstrap-responsive.min.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/github.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/punchable.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/jquery.js" type="text/javascript"></script>
  <script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
  <script src="/javascripts/highlight.pack.js" type="text/javascript"></script>
</head>
  <body>
    <div class="banner navbar-fixed-top">
  <div class="container">
    <h1>
      <a class="head" href="/"><img src="/images/rockyj_banner.png"/></a>
    </h1>
  </div>
</div>
    <div id="main" role="main" class="container">
      <div class="row">
        <div class="span9">
          <div id="main" role="main">
            <article>
              <h2 style="padding-bottom: 10px;">
                  <span class="highlighted">A gentle introduction to Backbone with jQuery</span> 
                  <span>May 25 2012</span>
              </h2>
              <div class="post">
                <p>Backbone is a great JavaScript framework, I am sure most developers would have heard about it. I spent some time learning Backbone and want to share the little I have learned so far.</p>

<p>When you go to the backbone.js <a href="http://backbonejs.org">page</a> it gives you a very nice view of Backbone's api and a very small introduction. This was a problem was for a thick guy like me, the Backbone introduction was not good enough and most importantly it didn't answer when and why should I use backbone.</p>

<p>After some Google searches, I learned that Backbone is good for organizing your JavaScript. As web developers we tend to do a lot of jQuery these days and more often than not jQuery can be pretty clean and decent. So why does one need Backbone? To answer this question lets build a small application in pure jQuery and then in Backbone + jQuery to see when and where Backbone helps.</p>

<p>Our app is very simple. I have made a Rails application and scaffolded a model called User with fields of name, age etc. For those of you who are not familiar with Rails, basically I have created CRUD operations on a model User and exposed them RESTfully.</p>

<p>I then created a few entries for the User model so that I have some data. Now to get started using jQuery, I built a form which has autocomplete so that it shows me the list of users as I type in a few characters in a text field. See image -</p>

<p><img src="/images/autocomplete.png" alt="jQuery UI Autocomplete" title="Autocomplete" />
<img src="/images/autocomplete_selected.png" alt="jQuery UI Autocomplete" title="Autocomplete" /></p>

<p>I have used jQuery, jQueryUI and underscore.js libraries to do this. Here is the code -</p>

<pre><code>&lt;h1&gt;Find Users&lt;/h1&gt;
&lt;form action="find" method="get"&gt;
  &lt;input type="text" placeholder="Enter Name" id="user-input"/&gt;
&lt;/form&gt;
&lt;div id="user-selection" style="margin-top:10px;"&gt;&lt;/div&gt;

&lt;script&gt;
  $(function() {
    function getNames() {
      var users = $.ajax({url : "/users.json", async: false});
      var names = _.map(JSON.parse(users.responseText), function(user){return user.name});
      return names;
    }
    
    var names = getNames();
    
    $("#user-input").autocomplete({
      source : names,
      minLength : 2,
      select: function(event, ui){
        $("#user-selection").html("Selected: " + ui.item.value);
      }
    });
  });
&lt;/script&gt;
</code></pre>

<p>Here we are basically using jQuery UI's autocomplete function and passing it the data source as a variable named "names", which we populate through an AJAX call (with Rails we get the server code free when we scaffold). Since the /users.json call retuns other associated data in the JSON we need to clean it up (it contains other fields such as age, last_updated_at etc.).</p>

<p>So we use the very good underscore.js library to convert this </p>

<pre><code>[{"name":"rocky", "age:32", ...}, {"name":"annie", "age:31", ...} ...] 
</code></pre>

<p>to </p>

<pre><code>["rocky", "annie" ...] 
</code></pre>

<p>using the <a href="http://underscorejs.org/#map">"map"</a> function. Please note that this is not the most efficient method for autocomplete as we are using AJAX to load all users in a JSON in one go but for our little experiment we will keep it this way.</p>

<p>Finally when the user makes a selection we give some feedback and display the selected value in a div using jQuery.</p>

<hr />

<p>Now lets use Backbone to rewrite this code. With Backbone we get a MVC kind of structure to our application. Here is the new code</p>

<pre><code>&lt;h1&gt;Find Users&lt;/h1&gt;
&lt;form action="find" method="get"&gt;
  &lt;input type="text" placeholder="Enter Name" id="user-input"/&gt;
&lt;/form&gt;
&lt;div id="user-selection" style="margin-top:10px;"&gt;&lt;/div&gt;

&lt;script&gt;
  $(function() {
    var User = Backbone.Model.extend({}); //Line 9

    var UserList = Backbone.Collection.extend({ //Line 11
      model: User,
      url: '/users.json',
      parse: function(response) {
        return response;
      }
    });

    var SelectionView = Backbone.View.extend({ //Line 19
      el : $('#user-selection'),
      render: function() {
        $(this.el).html("You Selected : " + this.model.get('name')); //Line 22
        return this;
      },
    });

    var users = new UserList(); //Line 26
    users.fetch({async: false});
    var userNames = users.pluck("name");

    $("#user-input").autocomplete({ //Line 30
      source : userNames,
      minLength : 2,
      select: function(event, ui){ //Line 33
        var selectedModel = users.where({name: ui.item.value})[0];
        var view = new SelectionView({model: selectedModel});
        view.render();
      }
    });
  });
&lt;/script&gt;
</code></pre>

<p>Don't worry if this looks too complicated. In 5 minutes, you will understand everything.</p>

<p>Firstly, there is no change in HTML. I have delibrately kept it that way.</p>

<ul>
  <li>
    <p>Lets start at line 9 - As evident our Model in MVC is User. We just declare a basic - Backbone Model.</p>
  </li>
  <li>
    <p>Line 11 - Backbone added a Collections object to MVC because most of the time we are dealing with a collection of Models. Here extend a Collection, give it the model User as it will be a collection of model User we declared above. We give it a 'url' from where this collection will be loaded and we provide a 'parse' function. This parse is called whenever we fetch data from the server which we do on line 27 and saves us any JSON cleanup.</p>
  </li>
  <li>
    <p>Line 19 - We declare a view here. For now ignore the code in there.</p>
  </li>
  <li>
    <p>Line 26 to 28 - Intialize the collection, load the data through AJAX and pluck the "name" field out from JSON. In our pure jQuery implementation we used underscore's "map" for this.</p>
  </li>
  <li>
    <p>Line 30 to 33 - No change from our pure jQuery implementation.</p>
  </li>
  <li>
    <p>Line 34 - Here using Collection.where function we fetch the model that was selected. The user selects a string so we have to do this.</p>
  </li>
  <li>
    <p>Line 35 - We instantiate our view and assign it the selected model.</p>
  </li>
  <li>
    <p>Line 37 - We render our view.</p>
  </li>
</ul>

<p>Let's now analyze our render function on line 22. this.model.get('name') will give you the selected model's name. We create a string by appending it with "You Selected : ".</p>

<p>We all know what $("#some-id").html() will do. So what is "el"? Basically, all Backbone Views have an el property which is the DOM element it is binded to. If not specified it is a 'div'. So we have binded our View to a div using a jQuery selector.</p>

<p>Talking of views we have manually set a string to be our HTML, this is ok for now but for more HTML Backbone also provides you with "templates" that can be compiled and added to your Views.</p>

<p>That's it, now our code is better and much more modular. I can see that you may not be impressed. In my example there is not a huge benefit by using Backbone. But imagine an app that loads multiple models on a page, uses AJAX to sync them and maybe listens to events and executes callbacks, all this leads to spaghetti code which is ugly and unmaintainable. That is where the benefit of MVC will kick in.</p>

<p>Also, if I had taken a bigger example it would have been difficult to explain it in one blog post. Probably that is why you don't see many simple examples of Backbone on the web.</p>

<p>We really have scratched the surface of Backbone here. For example, since our event was triggered by autocomplete we could not programmatically bind it for re-rending the view. But in case of clicking a button or a link (which are the most common events on the web) we could have easily saved some code by declartively binding the click of a button to a view's rendering.</p>

<p>I hope I have given you a small introduction to get started with Backbone. Please leave your comments for a better blog post next time.</p>

              </div>
              <hr/>
              <div id="disqus_thread"></div>
                <script type="text/javascript">
                  $(function(){
                    hljs.initHighlightingOnLoad();
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'rockyj'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                  });
                </script>
                <noscript>
                  Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                </noscript>
                <a href="http://disqus.com" class="dsq-brlink">
                  blog comments powered by <span class="logo-disqus">Disqus</span>
                </a>
            </article>
          </div>
        </div>
        <div class="span3">
          <div id="sidebar">
  <h3>
    <!--<img src="/images/Rocky_Jaiswal.jpg" alt="Rocky Jaiswal" width="121" height="115" style="max-width: 100%;"/>-->
    <br/>
    <a href="/about">About</a>
  </h3>
  <hr/>
  <h3>
    <a href="https://github.com/rocky-jaiswal" target="_blank">Github</a> /
    <a href="https://twitter.com/whatsuprocky" target="_blank">Twitter</a>
  </h3>
  <hr/>
  <h3>
    <a href="/videos">Videos</a>
  </h3>
  <hr/>
  <h3><a id="show-posts" href="#/posts">Posts</a> / <a id="show-tags" href="#/tags">Tags</a></h3>
  <div class="posts">
    <ol>
      
        <li><a href="/2013/05/24/angular_hacks.html">Angular.js Hacks</a> <span>May 24 2013</span></li>
      
        <li><a href="/2013/05/11/yeoman_and_backbone.html">Building HTML5 Apps with Yeoman and Backbone</a> <span>May 11 2013</span></li>
      
        <li><a href="/2013/05/03/what_motivates_programmers.html">What motivates programmers</a> <span>May  3 2013</span></li>
      
        <li><a href="/2013/05/02/ajaxify_with_backbone.html">Ajaxify a Form with Backbone</a> <span>May  2 2013</span></li>
      
        <li><a href="/2013/04/08/puppet_in_a_rush.html">Puppet in a rush</a> <span>Apr  8 2013</span></li>
      
        <li><a href="/2013/04/01/building_single_page_applications_and_cors.html">Building Single Page Applications and CORS</a> <span>Apr  1 2013</span></li>
      
        <li><a href="/2013/03/22/integrating_node_and_rails_with_redis.html">Integrating Rails and Node.js via Redis</a> <span>Mar 22 2013</span></li>
      
        <li><a href="/2012/12/13/backbone_and_coffeescript.html">Backbone.js and CoffeeScript - A Perfect Match</a> <span>Dec 13 2012</span></li>
      
        <li><a href="/2012/12/02/serving_rails_from_windows.html">Serving Rails from Windows</a> <span>Dec  2 2012</span></li>
      
        <li><a href="/2012/10/15/why_does_js_require_requirejs.html">Why does JavaScript require Require.js</a> <span>Oct 15 2012</span></li>
      
        <li><a href="/2012/09/22/rails_on_only_jvm.html">Rails on only JVM</a> <span>Sep 22 2012</span></li>
      
        <li><a href="/2012/09/15/akka_with_jruby.html">Akka with JRuby</a> <span>Sep 15 2012</span></li>
      
        <li><a href="/2012/09/09/rails_on_ruby_jruby_a_performance_comparison.html">Running Rails on Ruby or JRuby - A Performance Comparison</a> <span>Sep  9 2012</span></li>
      
        <li><a href="/2012/09/01/deploying_java_apps_with_capistrano.html">Deploying Java applications with Capistrano</a> <span>Sep  1 2012</span></li>
      
        <li><a href="/2012/08/26/accessing_server_data_from_a_native_android_app.html">Accessing server data from a native Android app</a> <span>Aug 26 2012</span></li>
      
        <li><a href="/2012/08/18/why_javascript_is_important.html">Why JavaScript is important</a> <span>Aug 18 2012</span></li>
      
        <li><a href="/2012/06/08/non_tangibles_of_agile.html">The non-tangibles of Agile</a> <span>Jun  8 2012</span></li>
      
        <li><a href="/2012/05/28/moved_to_html.html">Blog moved to pure HTML5, CSS3</a> <span>May 28 2012</span></li>
      
        <li><a href="/2012/05/25/intro_to_backbone_jQuery.html">A gentle introduction to Backbone with jQuery</a> <span>May 25 2012</span></li>
      
        <li><a href="/2012/05/21/video_rubyconf_india.html">Video of my talk with @arunagw at RubyConf India 2012</a> <span>May 21 2012</span></li>
      
        <li><a href="/2012/05/08/setting_up_solr.html">Setting up Solr</a> <span>May  8 2012</span></li>
      
        <li><a href="/2012/03/27/old_jboss_video.html">Old JBoss Video</a> <span>Mar 27 2012</span></li>
      
        <li><a href="/2012/03/26/ruby_conf_india_with_arunagw.html">Slides of my talk with @arunagw in Ruby Conf India 2012</a> <span>Mar 26 2012</span></li>
      
        <li><a href="/2012/03/23/embracing_jruby_1.html">Embracing JRuby - Part 1</a> <span>Mar 23 2012</span></li>
      
        <li><a href="/2012/03/05/musings_on_india_and_technology.html">Musings on India and Technology</a> <span>Mar  5 2012</span></li>
      
        <li><a href="/2012/01/31/job_of_a_software_developer.html">The Job of a Software Developer</a> <span>Jan 31 2012</span></li>
      
        <li><a href="/2011/12/27/configuring-nginx-with-jboss-tomcat.html">Configuring nginx with JBoss / Tomcat</a> <span>Dec 27 2011</span></li>
      
        <li><a href="/2011/12/27/a-weekend-with-couchdb-solr-and-torquebox.html">A weekend with CouchDB, Solr and Torquebox</a> <span>Dec 27 2011</span></li>
      
        <li><a href="/2011/12/01/jquery-flavored-coffeescript.html">jQuery flavored CoffeeScript</a> <span>Dec  1 2011</span></li>
      
        <li><a href="/2011/07/26/and-then-there-was-closure.html">And then there was Closure</a> <span>Jul 26 2011</span></li>
      
        <li><a href="/2011/07/04/the-problem-is-choice.html">The problem is choice</a> <span>Jul  4 2011</span></li>
      
        <li><a href="/2011/06/29/using-spring-for-scheduling-tasks.html">Using Spring for Scheduling Tasks</a> <span>Jun 29 2011</span></li>
      
        <li><a href="/2011/06/25/working-with-oracle-on-linux-ubuntu-fedora.html">Installing Oracle on Linux (Ubuntu / Fedora)</a> <span>Jun 25 2011</span></li>
      
        <li><a href="/2011/06/25/excel-manipulation-and-testing-in-java.html">Excel manipulation and testing in Java</a> <span>Jun 25 2011</span></li>
      
        <li><a href="/2011/06/06/putting-couchdb-and-rails-on-the-cloud.html">Putting CouchDB and Rails on the Cloud</a> <span>Jun  6 2011</span></li>
      
        <li><a href="/2011/05/16/integrating-google-re-captcha-with-a-rails-app.html">Integrating Google Re-Captcha with a Rails app</a> <span>May 16 2011</span></li>
      
        <li><a href="/2011/05/03/the-real-purpose-of-a-sprint-goal.html">The real purpose of a Sprint Goal</a> <span>May  3 2011</span></li>
      
        <li><a href="/2011/05/02/thoughts-of-the-week-24-30-april.html">Thoughts of the week 24 - 30 April</a> <span>May  2 2011</span></li>
      
        <li><a href="/2011/05/02/views-from-across-the-table.html">Views from across the table</a> <span>May  2 2011</span></li>
      
        <li><a href="/2011/04/20/be-happy-to-fail.html">Be Happy to Fail</a> <span>Apr 20 2011</span></li>
      
        <li><a href="/2011/04/14/using-rvm-on-ubuntu-to-install-multiple-versions-of-ruby.html">Using RVM on Ubuntu to install (multiple versions of) Ruby</a> <span>Apr 14 2011</span></li>
      
        <li><a href="/2011/04/11/thoughts-of-the-week-4-10-april.html">Thoughts of the week (4 - 10 April)</a> <span>Apr 11 2011</span></li>
      
        <li><a href="/2011/04/08/mapreduce-in-english.html">MapReduce in English</a> <span>Apr  8 2011</span></li>
      
        <li><a href="/2011/04/01/hello-world.html">Integrating JRuby and Java to create a mini rules engine</a> <span>Apr  1 2011</span></li>
      
        <li><a href="/2011/04/01/java-and-ruby-integration-via-soap.html">Java and Ruby integration via SOAP</a> <span>Apr  1 2011</span></li>
      
        <li><a href="/2011/03/31/google-app-engine-maven-jsf2.html">Google App Engine + Maven + JSF2</a> <span>Mar 31 2011</span></li>
      
        <li><a href="/2011/03/31/hello-jquery.html">Hello jQuery!</a> <span>Mar 31 2011</span></li>
      
        <li><a href="/2011/03/31/integrating-spring-3-with-jpa-2.html">Integrating Spring 3 with JPA 2</a> <span>Mar 31 2011</span></li>
      
        <li><a href="/2011/03/31/accessing-jboss-managed-resources-using-mbeans.html">Accessing JBoss managed resources using MBeans</a> <span>Mar 31 2011</span></li>
      
        <li><a href="/2011/03/31/from-zero-to-a-crud-app-without-writing-a-single-line-of-code-using-jruby.html">From Zero to a CRUD App (without writing a single line of code) using JRuby</a> <span>Mar 31 2011</span></li>
      
        <li><a href="/2011/03/11/big-bad-projects.html">Big bad projects</a> <span>Mar 11 2011</span></li>
      
        <li><a href="/2011/03/01/working-with-git.html">Working with Git</a> <span>Mar  1 2011</span></li>
      
    </ol>
  </div>
  <div class="tags">
    <ol>
      
        <li><a href="/tags/git.html">Git (1)</a></li>
      
        <li><a href="/tags/agile.html">Agile (8)</a></li>
      
        <li><a href="/tags/jboss.html">JBoss (2)</a></li>
      
        <li><a href="/tags/jruby.html">JRuby (11)</a></li>
      
        <li><a href="/tags/cloud.html">Cloud (1)</a></li>
      
        <li><a href="/tags/java.html">Java (9)</a></li>
      
        <li><a href="/tags/maven.html">Maven (1)</a></li>
      
        <li><a href="/tags/jquery.html">jQuery (1)</a></li>
      
        <li><a href="/tags/jpa.html">JPA (1)</a></li>
      
        <li><a href="/tags/spring.html">Spring (2)</a></li>
      
        <li><a href="/tags/ruby.html">Ruby (8)</a></li>
      
        <li><a href="/tags/general.html">General (7)</a></li>
      
        <li><a href="/tags/rails.html">Rails (6)</a></li>
      
        <li><a href="/tags/couchdb.html">CouchDB (2)</a></li>
      
        <li><a href="/tags/linux.html">Linux (1)</a></li>
      
        <li><a href="/tags/programming.html">Programming (1)</a></li>
      
        <li><a href="/tags/javascript.html">JavaScript (11)</a></li>
      
        <li><a href="/tags/coffeescript.html">CoffeeScript (5)</a></li>
      
        <li><a href="/tags/nosql.html">NoSQL (1)</a></li>
      
        <li><a href="/tags/torquebox.html">Torquebox (4)</a></li>
      
        <li><a href="/tags/solr.html">Solr (2)</a></li>
      
        <li><a href="/tags/jboss.html">Jboss (1)</a></li>
      
        <li><a href="/tags/tomcat.html">Tomcat (1)</a></li>
      
        <li><a href="/tags/backbone.html">Backbone (6)</a></li>
      
        <li><a href="/tags/android.html">Android (1)</a></li>
      
        <li><a href="/tags/phonegap.html">Phonegap (1)</a></li>
      
        <li><a href="/tags/capistrano.html">Capistrano (1)</a></li>
      
        <li><a href="/tags/scala.html">Scala (2)</a></li>
      
        <li><a href="/tags/akka.html">Akka (1)</a></li>
      
        <li><a href="/tags/node-js.html">Node.js (1)</a></li>
      
        <li><a href="/tags/require-js.html">Require.js (2)</a></li>
      
        <li><a href="/tags/play.html">Play (1)</a></li>
      
        <li><a href="/tags/puppet.html">Puppet (1)</a></li>
      
        <li><a href="/tags/devops.html">DevOps (1)</a></li>
      
        <li><a href="/tags/scrum.html">Scrum (1)</a></li>
      
        <li><a href="/tags/angularjs.html">AngularJS (1)</a></li>
      
    </ol>
  </div>
  <hr/>
</div>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10309067-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(function() {
    $('.tags').hide();
    $("#show-tags").click(function() {
      $('.tags').toggle();
      $('.posts').toggle();
    });
    $("#show-posts").click(function() {
      $('.tags').toggle();
      $('.posts').toggle();
    });
  });
</script>
        </div>
      </div>
    </div>
  </body>
</html>
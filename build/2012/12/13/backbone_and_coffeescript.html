<!DOCTYPE html>
<html>
  <head>
  <title>Rocky Jaiswal Backbone.js and CoffeeScript - A Perfect Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <link href="/stylesheets/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/bootstrap-responsive.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/github.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/punchable.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/jquery.js" type="text/javascript"></script>
  <script src="/javascripts/bootstrap.js" type="text/javascript"></script>
  <script src="/javascripts/highlight.pack.js" type="text/javascript"></script>
</head>
  <body>
    <div class="banner navbar-fixed-top">
  <div class="container">
    <h1>
      <a class="head" href="/"><img src="/images/rockyj_banner.png"/></a>
    </h1>
  </div>
</div>
    <div id="main" role="main" class="container">
      <div class="row">
        <div class="span9">
          <div id="main" role="main">
            <article>
              <h2 style="padding-bottom: 10px;">
                  <span class="color-orange">Backbone.js and CoffeeScript - A Perfect Match</span> 
                  <span>Dec 13 2012</span>
              </h2>
              <div class="post">
                <p>As I started learning more about JavaScript I was very impressed with CoffeeScript. It felt like JavaScript done right! But with time, as my JavaScript concepts improved I was a bit reluctant to write CoffeeScript. &#8220;Why learn one language that produces another when you can write the end product directly?&#8221; Also, my head could do without another set of syntax and rules to learn.</p>

<p>However, when I started writing code for <a href='http://backbonejs.org/'>Backbone.js</a> a few months back, it dawned on me that CoffeeScript is a beautiful language and makes writing Backbone.js apps a much more pleasant experience.</p>

<p>But first of all, why did I need Backbone.js? I was happy writing jQuery, it was solving all my problems but then the interface and the callbacks got more complex and one day my JavaScript file had more than 200 lines of code. I was pretty sure this was going to be a maintenance headache no matter how well I name my functions and how many comments I add. So I refactored the code to Backbone.js and had a handful of small, cleanly coded files that were easy to test and modify. So that&#8217;s that, a one line answer - we use Backbone.js to keep our JavaScript code clean.</p>

<p>Let&#8217;s take a simple example, assume you have a button, clicking on which makes an AJAX call and displays the result from the AJAX call back in a div. This is a simple use case for a Backbone.js.</p>

<p>The JavaScript and Backbone.js code for this may look like -</p>

<pre><code>//&lt;div id=&quot;container&quot;&gt;
  //&lt;input type=&quot;button&quot; id=&quot;btn1&quot; value=&quot;Go!&quot;&gt;&lt;/input&gt;
//&lt;/div&gt;
//&lt;span id=&quot;message&quot;&gt;&lt;/span&gt;

$(function(){

  var ButtonBarView = Backbone.View.extend({

    el: &#39;#container&#39;,

    events: {
      &quot;click #btn1&quot;:  &quot;makeAjaxCall&quot;
    },

    makeAjaxCall: function(){
      console.log(&quot;making an ajax call ...&quot;);
      this.options.messageView.render(&quot;result from ajax call&quot;);
    }

  });

  var MessageView = Backbone.View.extend({

    el: &#39;#message&#39;,

    render: function(message){
      var html = &quot;&lt;h3&gt;&quot; + message + &quot;&lt;/h3&gt;&quot;;
      this.$el.html(html); 
    }

  });

  var messageView = new MessageView();
  var buttonBarView = new ButtonBarView({messageView: messageView});

});</code></pre>

<p>Nothing much to explain here, we could have done the same thing using just jQuery but things go awry when there are ten such buttons on the screen each with its own AJAX call and DOM to update.</p>

<p>In the example above we create two Backbone views, on an event on the first one we render the second with the returned message.</p>

<p>Same thing written in CoffeeScript looks like this -</p>

<pre><code>$ -&gt;

  class ButtonBarView extends Backbone.View

    el: &#39;#container&#39;

    events: 
      &quot;click #btn1&quot;:  &quot;makeAjaxCall&quot;

    makeAjaxCall: -&gt;
      console.log(&quot;making an ajax call ...&quot;)
      @options.messageView.render(&quot;result from ajax call&quot;)

  class MessageView extends Backbone.View

    el: &#39;#message&#39;

    render: (message) -&gt;
      html = &quot;&lt;h3&gt;&quot; + message + &quot;&lt;/h3&gt;&quot;
      $(@el).html(html)

  messageView = new MessageView()
  buttonBarView = new ButtonBarView({messageView: messageView})</code></pre>

<p>To me the CoffeeScript code looks much more understandable and cleaner. But wait, do we see a &#8220;class&#8221; in the CoffeeScript code! How is that possible? And how does the &#8220;class&#8221; in CoffeeScript convert the code to the one written in JavaScript? Exploring this made me realize CoffeeScript&#8217;s beauty and brevity.</p>

<p>To answer the first question, we need to understand a bit of JavaScript and CoffeeScript magic. JavaScript is an object oriented language but does not have classes, it uses the prototypal inheritance mechanism to extend objects. CoffeeScript uses this mechanism to give us classes, for example -</p>

<p>This code -</p>

<pre><code>class Person

  constructor: (@name) -&gt;

  printName: -&gt;
    console.log(&quot;Name: &quot; + @name)

#rocky = new Person(&quot;Rocky&quot;)
#rocky.printName(); </code></pre>

<p>Gets converted to something like this in JavaScript -</p>

<pre><code>var Person = (function() {

  function Person(name) {
    this.name = name;
  }

  Person.prototype.printName = function() {
    return console.log(&quot;Name: &quot; + this.name);
  };

  return Person;

})();</code></pre>

<p>What this does is it returns us a &#8220;constructor&#8221; callback which can be used with the <strong>new</strong> keyword to create objects. CoffeeScript also uses JavaScript&#8217;s prototype mechanism to add methods to our object. However, the end user creates classes and methods like they do in their server side code. This is an AWESOME CoffeeScript feature that had me completely floored.</p>

<p>Now the second question, how does this -</p>

<pre><code>class MessageView extends Backbone.View</code></pre>

<p>relate to this -</p>

<pre><code>var MessageView = Backbone.View.extend({})</code></pre>

<p>To answer this lets see what happens to the CoffeeScript code when it gets converted to JavaScript -</p>

<pre><code>var __hasProp = {}.hasOwnProperty,
__extends = function(child, parent) { 
  for (var key in parent) { 
    if (__hasProp.call(parent, key)) child[key] = parent[key]; 
  } 
  function ctor() { this.constructor = child; } 
  ctor.prototype = parent.prototype; 
  child.prototype = new ctor(); 
  child.__super__ = parent.prototype; 
  return child; 
};

var MessageView = (function(_super) {

  __extends(MessageView, _super);

  function MessageView() {
    return MessageView.__super__.constructor.apply(this, arguments);
  }

  return MessageView;

})(Backbone.View);</code></pre>

<p>Once again JavaScript has no built in inheritance support so we fake it using it&#8217;s functional and prototypical features. The <strong>extends</strong> function generated and called by CoffeeScript behind the scene enables us to &#8220;extend&#8221; our class from Backbone&#8217;s View.</p>

<p>The end result is that Backbone code written in CoffeeScript is much more easier on the eye. In turn Backbone makes our JavaScript code much easier to maintain. So the combination of the two gives us code that is simple, clean and easy to maintain which is every developer&#8217;s dream come true :)</p>
              </div>
              <hr/>
              <div id="disqus_thread"></div>
                <script type="text/javascript">
                  $(function(){
                    hljs.initHighlightingOnLoad();
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'rockyj'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                  });
                </script>
                <noscript>
                  Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                </noscript>
                <a href="http://disqus.com" class="dsq-brlink">
                  blog comments powered by <span class="logo-disqus">Disqus</span>
                </a>
            </article>
          </div>
        </div>
        <div id="sidebar">
  <div class="span3">
    <h2>
      <img src="/images/Rocky_Jaiswal.jpg" alt="Rocky Jaiswal" width="121" height="115" style="max-width: 100%;"/>
      <br/>
      <a href="/about">About</a>
    </h2>
    <hr/>
    <h2>
      <a href="https://github.com/rocky-jaiswal" target="_blank">Github</a> /
      <a href="https://twitter.com/whatsuprocky" target="_blank">Twitter</a>
    </h2>
    <hr/>
    <h2>
      <a href="/videos">Videos</a>
    </h2>
    <hr/>
    <h2><a id="show-posts" href="#/posts">Posts</a> / <a id="show-tags" href="#/tags">Tags</a></h2>
    <div class="posts">
      <ol>
        
          <li><a href="/2013/05/11/yeoman_and_backbone.html">Building HTML5 Apps with Yeoman and Backbone</a> <span>May 11 2013</span></li>
        
          <li><a href="/2013/05/03/what_motivates_programmers.html">What motivates programmers</a> <span>May  3 2013</span></li>
        
          <li><a href="/2013/05/02/ajaxify_with_backbone.html">Ajaxify a Form with Backbone</a> <span>May  2 2013</span></li>
        
          <li><a href="/2013/04/08/puppet_in_a_rush.html">Puppet in a rush</a> <span>Apr  8 2013</span></li>
        
          <li><a href="/2013/04/01/building_single_page_applications_and_cors.html">Building Single Page Applications and CORS</a> <span>Apr  1 2013</span></li>
        
          <li><a href="/2013/03/22/integrating_node_and_rails_with_redis.html">Integrating Rails and Node.js via Redis</a> <span>Mar 22 2013</span></li>
        
          <li><a href="/2012/12/13/backbone_and_coffeescript.html">Backbone.js and CoffeeScript - A Perfect Match</a> <span>Dec 13 2012</span></li>
        
          <li><a href="/2012/12/02/serving_rails_from_windows.html">Serving Rails from Windows</a> <span>Dec  2 2012</span></li>
        
          <li><a href="/2012/10/15/why_does_js_require_requirejs.html">Why does JavaScript require Require.js</a> <span>Oct 15 2012</span></li>
        
          <li><a href="/2012/09/22/rails_on_only_jvm.html">Rails on only JVM</a> <span>Sep 22 2012</span></li>
        
          <li><a href="/2012/09/15/akka_with_jruby.html">Akka with JRuby</a> <span>Sep 15 2012</span></li>
        
          <li><a href="/2012/09/09/rails_on_ruby_jruby_a_performance_comparison.html">Running Rails on Ruby or JRuby - A Performance Comparison</a> <span>Sep  9 2012</span></li>
        
          <li><a href="/2012/09/01/deploying_java_apps_with_capistrano.html">Deploying Java applications with Capistrano</a> <span>Sep  1 2012</span></li>
        
          <li><a href="/2012/08/26/accessing_server_data_from_a_native_android_app.html">Accessing server data from a native Android app</a> <span>Aug 26 2012</span></li>
        
          <li><a href="/2012/08/18/why_javascript_is_important.html">Why JavaScript is important</a> <span>Aug 18 2012</span></li>
        
          <li><a href="/2012/06/08/non_tangibles_of_agile.html">The non-tangibles of Agile</a> <span>Jun  8 2012</span></li>
        
          <li><a href="/2012/05/28/moved_to_html.html">Blog moved to pure HTML5, CSS3</a> <span>May 28 2012</span></li>
        
          <li><a href="/2012/05/25/intro_to_backbone_jQuery.html">A gentle introduction to Backbone with jQuery</a> <span>May 25 2012</span></li>
        
          <li><a href="/2012/05/21/video_rubyconf_india.html">Video of my talk with @arunagw at RubyConf India 2012</a> <span>May 21 2012</span></li>
        
          <li><a href="/2012/05/08/setting_up_solr.html">Setting up Solr</a> <span>May  8 2012</span></li>
        
          <li><a href="/2012/03/27/old_jboss_video.html">Old JBoss Video</a> <span>Mar 27 2012</span></li>
        
          <li><a href="/2012/03/26/ruby_conf_india_with_arunagw.html">Slides of my talk with @arunagw in Ruby Conf India 2012</a> <span>Mar 26 2012</span></li>
        
          <li><a href="/2012/03/23/embracing_jruby_1.html">Embracing JRuby - Part 1</a> <span>Mar 23 2012</span></li>
        
          <li><a href="/2012/03/05/musings_on_india_and_technology.html">Musings on India and Technology</a> <span>Mar  5 2012</span></li>
        
          <li><a href="/2012/01/31/job_of_a_software_developer.html">The Job of a Software Developer</a> <span>Jan 31 2012</span></li>
        
          <li><a href="/2011/12/27/configuring-nginx-with-jboss-tomcat.html">Configuring nginx with JBoss / Tomcat</a> <span>Dec 27 2011</span></li>
        
          <li><a href="/2011/12/27/a-weekend-with-couchdb-solr-and-torquebox.html">A weekend with CouchDB, Solr and Torquebox</a> <span>Dec 27 2011</span></li>
        
          <li><a href="/2011/12/01/jquery-flavored-coffeescript.html">jQuery flavored CoffeeScript</a> <span>Dec  1 2011</span></li>
        
          <li><a href="/2011/07/26/and-then-there-was-closure.html">And then there was Closure</a> <span>Jul 26 2011</span></li>
        
          <li><a href="/2011/07/04/the-problem-is-choice.html">The problem is choice</a> <span>Jul  4 2011</span></li>
        
          <li><a href="/2011/06/29/using-spring-for-scheduling-tasks.html">Using Spring for Scheduling Tasks</a> <span>Jun 29 2011</span></li>
        
          <li><a href="/2011/06/25/working-with-oracle-on-linux-ubuntu-fedora.html">Installing Oracle on Linux (Ubuntu / Fedora)</a> <span>Jun 25 2011</span></li>
        
          <li><a href="/2011/06/25/excel-manipulation-and-testing-in-java.html">Excel manipulation and testing in Java</a> <span>Jun 25 2011</span></li>
        
          <li><a href="/2011/06/06/putting-couchdb-and-rails-on-the-cloud.html">Putting CouchDB and Rails on the Cloud</a> <span>Jun  6 2011</span></li>
        
          <li><a href="/2011/05/16/integrating-google-re-captcha-with-a-rails-app.html">Integrating Google Re-Captcha with a Rails app</a> <span>May 16 2011</span></li>
        
          <li><a href="/2011/05/03/the-real-purpose-of-a-sprint-goal.html">The real purpose of a Sprint Goal</a> <span>May  3 2011</span></li>
        
          <li><a href="/2011/05/02/thoughts-of-the-week-24-30-april.html">Thoughts of the week 24 - 30 April</a> <span>May  2 2011</span></li>
        
          <li><a href="/2011/05/02/views-from-across-the-table.html">Views from across the table</a> <span>May  2 2011</span></li>
        
          <li><a href="/2011/04/20/be-happy-to-fail.html">Be Happy to Fail</a> <span>Apr 20 2011</span></li>
        
          <li><a href="/2011/04/14/using-rvm-on-ubuntu-to-install-multiple-versions-of-ruby.html">Using RVM on Ubuntu to install (multiple versions of) Ruby</a> <span>Apr 14 2011</span></li>
        
          <li><a href="/2011/04/11/thoughts-of-the-week-4-10-april.html">Thoughts of the week (4 - 10 April)</a> <span>Apr 11 2011</span></li>
        
          <li><a href="/2011/04/08/mapreduce-in-english.html">MapReduce in English</a> <span>Apr  8 2011</span></li>
        
          <li><a href="/2011/04/01/java-and-ruby-integration-via-soap.html">Java and Ruby integration via SOAP</a> <span>Apr  1 2011</span></li>
        
          <li><a href="/2011/04/01/hello-world.html">Integrating JRuby and Java to create a mini rules engine</a> <span>Apr  1 2011</span></li>
        
          <li><a href="/2011/03/31/integrating-spring-3-with-jpa-2.html">Integrating Spring 3 with JPA 2</a> <span>Mar 31 2011</span></li>
        
          <li><a href="/2011/03/31/accessing-jboss-managed-resources-using-mbeans.html">Accessing JBoss managed resources using MBeans</a> <span>Mar 31 2011</span></li>
        
          <li><a href="/2011/03/31/hello-jquery.html">Hello jQuery!</a> <span>Mar 31 2011</span></li>
        
          <li><a href="/2011/03/31/from-zero-to-a-crud-app-without-writing-a-single-line-of-code-using-jruby.html">From Zero to a CRUD App (without writing a single line of code) using JRuby</a> <span>Mar 31 2011</span></li>
        
          <li><a href="/2011/03/31/google-app-engine-maven-jsf2.html">Google App Engine + Maven + JSF2</a> <span>Mar 31 2011</span></li>
        
          <li><a href="/2011/03/11/big-bad-projects.html">Big bad projects</a> <span>Mar 11 2011</span></li>
        
          <li><a href="/2011/03/01/working-with-git.html">Working with Git</a> <span>Mar  1 2011</span></li>
        
      </ol>
    </div>
    <div class="tags">
      <ol>
        
          <li><a href="/tags/javascript.html">JavaScript (10)</a></li>
        
          <li><a href="/tags/coffeescript.html">CoffeeScript (5)</a></li>
        
          <li><a href="/tags/jruby.html">JRuby (11)</a></li>
        
          <li><a href="/tags/agile.html">Agile (8)</a></li>
        
          <li><a href="/tags/general.html">General (7)</a></li>
        
          <li><a href="/tags/git.html">Git (1)</a></li>
        
          <li><a href="/tags/solr.html">Solr (2)</a></li>
        
          <li><a href="/tags/scala.html">Scala (2)</a></li>
        
          <li><a href="/tags/play.html">Play (1)</a></li>
        
          <li><a href="/tags/require-js.html">Require.js (2)</a></li>
        
          <li><a href="/tags/backbone.html">Backbone (6)</a></li>
        
          <li><a href="/tags/java.html">Java (9)</a></li>
        
          <li><a href="/tags/ruby.html">Ruby (8)</a></li>
        
          <li><a href="/tags/torquebox.html">Torquebox (4)</a></li>
        
          <li><a href="/tags/rails.html">Rails (6)</a></li>
        
          <li><a href="/tags/jboss.html">JBoss (2)</a></li>
        
          <li><a href="/tags/couchdb.html">CouchDB (2)</a></li>
        
          <li><a href="/tags/nosql.html">NoSQL (1)</a></li>
        
          <li><a href="/tags/linux.html">Linux (1)</a></li>
        
          <li><a href="/tags/programming.html">Programming (1)</a></li>
        
          <li><a href="/tags/node-js.html">Node.js (1)</a></li>
        
          <li><a href="/tags/jpa.html">JPA (1)</a></li>
        
          <li><a href="/tags/spring.html">Spring (2)</a></li>
        
          <li><a href="/tags/capistrano.html">Capistrano (1)</a></li>
        
          <li><a href="/tags/akka.html">Akka (1)</a></li>
        
          <li><a href="/tags/jquery.html">jQuery (1)</a></li>
        
          <li><a href="/tags/puppet.html">Puppet (1)</a></li>
        
          <li><a href="/tags/devops.html">DevOps (1)</a></li>
        
          <li><a href="/tags/jboss.html">Jboss (1)</a></li>
        
          <li><a href="/tags/tomcat.html">Tomcat (1)</a></li>
        
          <li><a href="/tags/cloud.html">Cloud (1)</a></li>
        
          <li><a href="/tags/maven.html">Maven (1)</a></li>
        
          <li><a href="/tags/android.html">Android (1)</a></li>
        
          <li><a href="/tags/phonegap.html">Phonegap (1)</a></li>
        
          <li><a href="/tags/scrum.html">Scrum (1)</a></li>
        
      </ol>
    </div>
    <hr/>
  </div>
</div>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10309067-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(function() {
    $('.tags').hide();
    $("#show-tags").click(function() {
      $('.tags').toggle();
      $('.posts').toggle();
    });
    $("#show-posts").click(function() {
      $('.tags').toggle();
      $('.posts').toggle();
    });
  });
</script>
      </div>
    </div>
  </body>
</html>
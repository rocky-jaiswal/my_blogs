<!DOCTYPE html>
<html>
  <head>
  <title>Rocky Jaiswal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/bootstrap-responsive.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/github.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/jquery.js" type="text/javascript"></script>
  <script src="/javascripts/bootstrap.js" type="text/javascript"></script>
  <script src="/javascripts/highlight.pack.js" type="text/javascript"></script>
</head>
  <body>
    <div class="banner">
  <div class="container">
    <h1>
      <a class="head" href="/"><img src="/images/rockyj_banner.png"/></a>
    </h1>
  </div>
</div>
    <div id="main" role="main" class="container">
      <div class="row">
        <div class="span9">
          <div id="main" role="main">
            <article>
              <h2 style="padding-bottom: 10px;">
                  <span class="color-orange">From Zero to a CRUD App (without writing a single line of code) using JRuby</span> 
                  <span>Mar 31 2011</span>
              </h2>
              <div class="post">
                <p>This blog introduces you to JRuby and Rails. We will create a simple web application with CRUD features and deploy it on Tomcat.</p>

<p>Required Software - -JDK 6 -Tomcat 6 -MySql -JRuby</p>

<p>The blog assumes that you have JDK, MySql and Tomcat set up. Download JRuby from the link above and add the {JRUBY_DIR}/bin to your classpath.</p>

<p>Let&#8217;s run the first command (from any directory) -</p>

<pre><code>jruby -S gem install mongrel activerecord-jdbcmysql-adapter rails</code></pre>

<p>If the command above complains of lack of jruby-openssl then abort it (using Ctrl+C) and first run &#8220;jruby -S gem install jruby-openssl&#8221;.</p>

<p>This will install mongrel server, activerecord-jdbcmysql-adapter and rails. &#8220;gem install&#8221; is the Ruby way to install libraries, in Java you download jars and add them to your classpath. Similarly in Ruby you do a &#8220;gem install&#8221; which does everything for you.</p>

<p>Now run the following command -</p>

<pre><code>jruby -S rails XLib -d mysql</code></pre>

<p>Here we are using JRuby to tell Rails (a Ruby web application framework) to create a application XLib which uses MySql as the database.</p>

<p>Enter the newly-created &#8220;XLib&#8221; directory, then modify the config/database.yml. First and foremost, you need to adjust the adapter name, and instead of &#8216;mysql&#8217; you should specify &#8216;jdbcmysql&#8217;. You might also want to delete the lines starting with &#8216;socket:&#8217;. Your development environment config can look like -</p>

<pre><code>development:
adapter: jdbcmysql
encoding: utf8
reconnect: false
database: XLib_dev
pool: 5
username: root
password: root</code></pre>

<p>Now let&#8217;s create our schema (make sure you are in your XLib directory) -</p>

<pre><code>jruby -S rake db:create:all</code></pre>

<p>The command above runs a rake (like make but for Ruby) task that creates the necessary schema in MySql.</p>

<ul>
<li>Please note, there is currently a bug in activerecord-jdbcmysql-adapter due to which first time schema creation may not work. You can create the schema manually (just name it XLib_dev as in config above), this is a one time task so it doesn&#8217;t hurt too much.</li>
</ul>

<p>Now lets run -</p>

<pre><code>jruby script/generate scaffold book title:string authors:string genre:string quantity:int added_on:date</code></pre>

<p>Scaffolding is one of the main USPs of Rails, it generates the necessary CRUD for a domain object, in our case a &#8220;book&#8221;.</p>

<p>Now we need to update our database -</p>

<pre><code>jruby -S rake db:migrate</code></pre>

<p>We&#8217;re all done, let&#8217;s start the mongrel server -</p>

<pre><code>jruby script/server</code></pre>

<p>check out the application at -</p>

<p><strong>http://localhost:3000/books</strong></p>

<p>You can add, edit, delete and see a listing of all the books.</p>

<p>We used JRuby (which is the Java implementation of Ruby) so that our application can run on JVM. Since it can run on JVM it can also run on Tomcat. To run it on Tomcat we first need to convert it to a war file. You guessed it, there is a gem for that -</p>

<pre><code>jruby -S gem install warbler</code></pre>

<p>Next, run the following (inside XLib directory) -</p>

<pre><code>warble config</code></pre>

<p>This will generate a config file for warble as warble.rb in your app&#8217;s config directory</p>

<p>Open this config file and add the following line at the end -</p>

<pre><code>config.gems += [&quot;activerecord-jdbcmysql-adapter&quot;, &quot;jruby-openssl&quot;]</code></pre>

<p>This enables the gems above to be bundled in your war, otherwise Tomcat complains of missing libraries.</p>

<p>Now, run the command -</p>

<pre><code>warble</code></pre>

<p>This will create XLib.war in you XLib directory, copy this file to your $TOMCAT_HOME/webapps and start Tomcat. This will unzip the war, shutdown Tomcat after a while, check XLibs&#8217; web.xml and make sure the environment points to development. Restart Tomcat.</p>

<p>Go to <strong>http://localhost:8080/XLib/books</strong></p>

<p>And that&#8217;s it, you have a CRUD application running on Tomcat without even writing a single line of code.</p>
              </div>
              <hr/>
              <div id="disqus_thread"></div>
                <script type="text/javascript">
                  $(function(){
                    hljs.initHighlightingOnLoad();
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'rockyj'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                  });
                </script>
                <noscript>
                  Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                </noscript>
                <a href="http://disqus.com" class="dsq-brlink">
                  blog comments powered by <span class="logo-disqus">Disqus</span>
                </a>
            </article>
          </div>
        </div>
        <div class="span3">
  <h2>
    <img src="/images/Rocky_Jaiswal.jpg" alt="Rocky Jaiswal" width="121" height="115" style="max-width: 100%;"/>
    <br/>
    <a href="/about">About</a>
  </h2>
  <hr/>
  <h2>
    <a href="http://github.com/rocky-jaiswal" target="_blank">Github</a>
  </h2>
  <hr/>
  <h2>Articles</h2>
  <ol>
    
      <li><a href="/2012/09/22/rails_on_only_jvm.html">Rails on only JVM</a> <span>Sep 22 2012</span></li>
    
      <li><a href="/2012/09/15/akka_with_jruby.html">Akka with JRuby</a> <span>Sep 15 2012</span></li>
    
      <li><a href="/2012/09/09/rails_on_ruby_jruby_a_performance_comparison.html">Running Rails on Ruby or JRuby - A Performance Comparison</a> <span>Sep  9 2012</span></li>
    
      <li><a href="/2012/09/01/deploying_java_apps_with_capistrano.html">Deploying Java applications with Capistrano</a> <span>Sep  1 2012</span></li>
    
      <li><a href="/2012/08/26/accessing_server_data_from_a_native_android_app.html">Accessing server data from a native Android app</a> <span>Aug 26 2012</span></li>
    
      <li><a href="/2012/08/18/why_javascript_is_important.html">Why JavaScript is important</a> <span>Aug 18 2012</span></li>
    
      <li><a href="/2012/06/08/non_tangibles_of_agile.html">The non-tangibles of Agile</a> <span>Jun  8 2012</span></li>
    
      <li><a href="/2012/05/28/moved_to_html.html">Blog moved to pure HTML5, CSS3</a> <span>May 28 2012</span></li>
    
      <li><a href="/2012/05/25/intro_to_backbone_jQuery.html">A gentle introduction to Backbone with jQuery</a> <span>May 25 2012</span></li>
    
      <li><a href="/2012/05/21/video_rubyconf_india.html">Video of my talk with @arunagw at RubyConf India 2012</a> <span>May 21 2012</span></li>
    
      <li><a href="/2012/05/08/setting_up_solr.html">Setting up Solr</a> <span>May  8 2012</span></li>
    
      <li><a href="/2012/03/27/old_jboss_video.html">Old JBoss Video</a> <span>Mar 27 2012</span></li>
    
      <li><a href="/2012/03/26/ruby_conf_india_with_arunagw.html">Slides of my talk with @arunagw in Ruby Conf India 2012</a> <span>Mar 26 2012</span></li>
    
      <li><a href="/2012/03/23/embracing_jruby_1.html">Embracing JRuby - Part 1</a> <span>Mar 23 2012</span></li>
    
      <li><a href="/2012/03/05/musings_on_india_and_technology.html">Musings on India and Technology</a> <span>Mar  5 2012</span></li>
    
      <li><a href="/2012/01/31/job_of_a_software_developer.html">The Job of a Software Developer</a> <span>Jan 31 2012</span></li>
    
      <li><a href="/2011/12/27/configuring-nginx-with-jboss-tomcat.html">Configuring nginx with JBoss / Tomcat</a> <span>Dec 27 2011</span></li>
    
      <li><a href="/2011/12/27/a-weekend-with-couchdb-solr-and-torquebox.html">A weekend with CouchDB, Solr and Torquebox</a> <span>Dec 27 2011</span></li>
    
      <li><a href="/2011/12/01/jquery-flavored-coffeescript.html">jQuery flavored CoffeeScript</a> <span>Dec  1 2011</span></li>
    
      <li><a href="/2011/07/26/and-then-there-was-closure.html">And then there was Closure</a> <span>Jul 26 2011</span></li>
    
      <li><a href="/2011/07/04/the-problem-is-choice.html">The problem is choice</a> <span>Jul  4 2011</span></li>
    
      <li><a href="/2011/06/29/using-spring-for-scheduling-tasks.html">Using Spring for Scheduling Tasks</a> <span>Jun 29 2011</span></li>
    
      <li><a href="/2011/06/25/working-with-oracle-on-linux-ubuntu-fedora.html">Installing Oracle on Linux (Ubuntu / Fedora)</a> <span>Jun 25 2011</span></li>
    
      <li><a href="/2011/06/25/excel-manipulation-and-testing-in-java.html">Excel manipulation and testing in Java</a> <span>Jun 25 2011</span></li>
    
      <li><a href="/2011/06/06/putting-couchdb-and-rails-on-the-cloud.html">Putting CouchDB and Rails on the Cloud</a> <span>Jun  6 2011</span></li>
    
      <li><a href="/2011/05/16/integrating-google-re-captcha-with-a-rails-app.html">Integrating Google Re-Captcha with a Rails app</a> <span>May 16 2011</span></li>
    
      <li><a href="/2011/05/03/the-real-purpose-of-a-sprint-goal.html">The real purpose of a Sprint Goal</a> <span>May  3 2011</span></li>
    
      <li><a href="/2011/05/02/views-from-across-the-table.html">Views from across the table</a> <span>May  2 2011</span></li>
    
      <li><a href="/2011/05/02/thoughts-of-the-week-24-30-april.html">Thoughts of the week 24 - 30 April</a> <span>May  2 2011</span></li>
    
      <li><a href="/2011/04/20/be-happy-to-fail.html">Be Happy to Fail</a> <span>Apr 20 2011</span></li>
    
      <li><a href="/2011/04/14/using-rvm-on-ubuntu-to-install-multiple-versions-of-ruby.html">Using RVM on Ubuntu to install (multiple versions of) Ruby</a> <span>Apr 14 2011</span></li>
    
      <li><a href="/2011/04/11/thoughts-of-the-week-4-10-april.html">Thoughts of the week (4 - 10 April)</a> <span>Apr 11 2011</span></li>
    
      <li><a href="/2011/04/08/mapreduce-in-english.html">MapReduce in English</a> <span>Apr  8 2011</span></li>
    
      <li><a href="/2011/04/01/java-and-ruby-integration-via-soap.html">Java and Ruby integration via SOAP</a> <span>Apr  1 2011</span></li>
    
      <li><a href="/2011/04/01/hello-world.html">Integrating JRuby and Java to create a mini rules engine</a> <span>Apr  1 2011</span></li>
    
      <li><a href="/2011/03/31/accessing-jboss-managed-resources-using-mbeans.html">Accessing JBoss managed resources using MBeans</a> <span>Mar 31 2011</span></li>
    
      <li><a href="/2011/03/31/from-zero-to-a-crud-app-without-writing-a-single-line-of-code-using-jruby.html">From Zero to a CRUD App (without writing a single line of code) using JRuby</a> <span>Mar 31 2011</span></li>
    
      <li><a href="/2011/03/31/google-app-engine-maven-jsf2.html">Google App Engine + Maven + JSF2</a> <span>Mar 31 2011</span></li>
    
      <li><a href="/2011/03/31/hello-jquery.html">Hello jQuery!</a> <span>Mar 31 2011</span></li>
    
      <li><a href="/2011/03/31/integrating-spring-3-with-jpa-2.html">Integrating Spring 3 with JPA 2</a> <span>Mar 31 2011</span></li>
    
      <li><a href="/2011/03/11/big-bad-projects.html">Big bad projects</a> <span>Mar 11 2011</span></li>
    
      <li><a href="/2011/03/01/working-with-git.html">Working with Git</a> <span>Mar  1 2011</span></li>
    
  </ol>
  <hr/>
  <h2>Tags</h2>
  <ol>
    
      <li><a href="tags/jboss.html">JBoss (2)</a></li>
    
      <li><a href="tags/agile.html">Agile (7)</a></li>
    
      <li><a href="tags/general.html">General (6)</a></li>
    
      <li><a href="tags/java.html">Java (9)</a></li>
    
      <li><a href="tags/jruby.html">JRuby (10)</a></li>
    
      <li><a href="tags/ruby.html">Ruby (8)</a></li>
    
      <li><a href="tags/capistrano.html">Capistrano (1)</a></li>
    
      <li><a href="tags/git.html">Git (1)</a></li>
    
      <li><a href="tags/javascript.html">JavaScript (4)</a></li>
    
      <li><a href="tags/solr.html">Solr (2)</a></li>
    
      <li><a href="tags/jpa.html">JPA (1)</a></li>
    
      <li><a href="tags/spring.html">Spring (2)</a></li>
    
      <li><a href="tags/coffeescript.html">CoffeeScript (1)</a></li>
    
      <li><a href="tags/rails.html">Rails (4)</a></li>
    
      <li><a href="tags/torquebox.html">Torquebox (3)</a></li>
    
      <li><a href="tags/couchdb.html">CouchDB (2)</a></li>
    
      <li><a href="tags/nosql.html">NoSQL (1)</a></li>
    
      <li><a href="tags/jquery.html">jQuery (1)</a></li>
    
      <li><a href="tags/backbone.html">Backbone (2)</a></li>
    
      <li><a href="tags/linux.html">Linux (1)</a></li>
    
      <li><a href="tags/programming.html">Programming (1)</a></li>
    
      <li><a href="tags/android.html">Android (1)</a></li>
    
      <li><a href="tags/phonegap.html">Phonegap (1)</a></li>
    
      <li><a href="tags/scala.html">Scala (1)</a></li>
    
      <li><a href="tags/akka.html">Akka (1)</a></li>
    
      <li><a href="tags/jboss.html">Jboss (1)</a></li>
    
      <li><a href="tags/tomcat.html">Tomcat (1)</a></li>
    
      <li><a href="tags/cloud.html">Cloud (1)</a></li>
    
      <li><a href="tags/maven.html">Maven (1)</a></li>
    
  </ol>
  <hr/>
</div>
      </div>
    </div>
  </body>
</html>